# 시스템 모니터링 대시보드 (2-Page Demo)

## 프로젝트 개요
- **Name**: 심사위원 대상 라이브 시연용 2페이지 구조 시스템 모니터링 데모
- **Goal**: "페이지1(정상운영) → 페이지2(거버넌스 승인 + 아키텍처 분석 + 문제 팝업)" 플로우 시연
- **Features**: 
  - **페이지 1**: 정상 운영 시스템 현황 대시보드
  - **페이지 2**: 거버넌스 승인 절차 + 시스템 아키텍처 설계도 + 문제 팝업 및 로그 분석
  - 시나리오 기반 장애 시뮬레이션
  - 원클릭 자동 보수 액션

## 📱 라이브 데모 URL
- **메인 페이지 (정상운영)**: https://3000-i859e7tn7io2jtludjlho-6532622b.e2b.dev
- **모니터링 페이지 (문제분석)**: https://3000-i859e7tn7io2jtludjlho-6532622b.e2b.dev/monitoring
- **Health Check**: https://3000-i859e7tn7io2jtludjlho-6532622b.e2b.dev/api/status

## 🏗️ 시스템 아키텍처

### 핵심 컴포넌트
1. **프런트엔드**: 실시간 토폴로지 맵, 팝업 알림, 드릴다운 패널
2. **시나리오 오케스트레이터**: S1/S2 장애 시뮬레이션 제어
3. **헬스 모니터링**: 노드별 상태(빨/녹/황) 계산
4. **리메디에이션 서비스**: 자동 보수 액션 실행
5. **실시간 스트리밍**: SSE 기반 상태 업데이트 (2초 간격)

### 데이터 모델
- **노드**: dashboard, api, etl, dwh, batch, cache, storage (7개 시스템)
- **메트릭**: CPU, 메모리, 응답시간, 큐 깊이, 오류율
- **인시던트**: 실시간 장애 이벤트 및 해결 기록
- **스토리지**: 메모리 기반 (데모용)

## 🎯 2-페이지 시연 구조

### 📄 페이지 1: 정상 운영 현황 대시보드
**URL**: `/` (메인 페이지)
- **목적**: 평상시 정상 운영중인 시스템 현황 표시
- **구성요소**:
  - 전체 시스템 상태 요약 (가용성 99.8%, 응답시간 120ms)
  - 서비스별 상태 카드 (모두 녹색 정상)
  - 최근 활동 로그 (백업 완료, 헬스체크 통과 등)
  - **시나리오 테스트 버튼**: 장애 상황으로 전환

### 📄 페이지 2: 거버넌스 승인 + 아키텍처 분석 
**URL**: `/monitoring` (모니터링 페이지)
- **목적**: 문제 발생 시 거버넌스 승인 절차와 시스템 분석
- **구성요소**:
  - **거버넌스 승인 절차**: 4단계 승인 프로세스 시각화
  - **시스템 아키텍처 설계도**: 7개 노드 토폴로지 맵 (빨간 노드 클릭 가능)
  - **문제 분석 섹션**: 현재 문제 + 권장 조치사항
  - **팝업**: 빨간 노드 클릭 시 상세 로그 및 메트릭 분석

## 🚀 심사위원 시연 동선

### 1단계: 정상 상태 확인 (2분)
- **페이지 1**에서 정상 운영 현황 확인
- 모든 지표가 녹색/정상 상태임을 보여줌
- "시스템이 안정적으로 운영되고 있음" 설명

### 2단계: 문제 발생 시뮬레이션 (1분)
- **페이지 1**에서 "장애 시나리오 시뮬레이션 시작" 버튼 클릭
- 자동으로 **페이지 2**(모니터링)로 전환
- "이제 문제가 감지되어 거버넌스 승인 절차가 시작됨" 설명

### 3단계: 거버넌스 승인 절차 (2분)
- **페이지 2**에서 4단계 승인 프로세스 자동 진행 확인
  - 1단계: 장애 감지 (완료)
  - 2단계: 관리자 승인 (완료)  
  - 3단계: 아키텍처 분석 (진행중→완료)
  - 4단계: 자동 복구 실행 (대기중→진행중)

### 4단계: 아키텍처 분석 및 문제 해결 (4분)
- **시스템 설계도**에서 빨간 노드(DWH) 확인
- **빨간 노드 클릭** → 팝업에서 상세 문제 분석:
  - 🚨 문제 상황: "결산 시점 대량 동시 조회로 인한 큐 포화"
  - 📊 현재 지표: CPU 95%, 응답시간 8000ms, 큐 깊이 150
  - 📝 에러 로그: Queue depth exceeded, Memory pressure 등
- **"자동 수리" 버튼 클릭** → 문제 해결
- 거버넌스 4단계 완료 + 모든 문제 해결됨 메시지 확인

### 5단계: 정상화 확인 (1분)  
- "시스템 복구" 버튼으로 정상 상태로 복귀
- **페이지 1**로 돌아가서 모든 시스템이 녹색으로 복구됨 확인

## 📊 API 엔드포인트

### 토폴로지 및 상태
- `GET /api/topology` - 시스템 설계도 구조
- `GET /api/status` - 노드별 실시간 상태
- `GET /api/node/:id/drilldown` - 상세 드릴다운 정보

### 시나리오 제어
- `POST /api/scenario/start?s=1|2` - 시나리오 시작
- `POST /api/scenario/stop` - 모든 시나리오 정지

### 리메디에이션
- `POST /api/remediation/apply` - 보수 액션 실행
- `GET /api/incidents` - 활성 인시던트 조회

### 실시간 업데이트
- `GET /api/events` - SSE 스트림 (2초 간격)

## 🛠️ 기술 스택
- **Backend**: Hono Framework + TypeScript
- **Frontend**: Vanilla JavaScript + TailwindCSS
- **Real-time**: Server-Sent Events (SSE)
- **Icons**: Font Awesome
- **Deployment**: Cloudflare Pages
- **Storage**: In-Memory (데모용)

## 💻 로컬 개발 환경

```bash
# 포트 정리 및 빌드
npm run build

# PM2로 서비스 시작
pm2 start ecosystem.config.cjs

# 상태 확인
curl http://localhost:3000

# 로그 확인
pm2 logs --nostream
```

## 💡 데모 핵심 특징

### 🔄 2-페이지 구조의 장점
1. **현실적인 운영 시나리오**: 평상시 정상 운영 → 문제 발생 시 전용 모니터링
2. **거버넌스 프로세스 시각화**: 실제 기업 환경의 승인 절차 반영
3. **명확한 책임 분리**: 일반 모니터링 vs 긴급 대응 모드
4. **단계적 정보 제공**: 전체 현황 → 상세 분석 → 구체적 액션

### 🎯 심사위원 어필 포인트
- **실무 적합성**: 실제 운영팀이 사용할 수 있는 현실적인 구조
- **확장성**: 각 페이지별로 독립적인 기능 확장 가능
- **사용성**: 상황별 맞춤형 UI/UX 제공
- **거버넌스**: 기업 환경의 승인 프로세스 반영

### 🚀 기술적 구현 특징
- **단일 Hono 앱**: 2개 페이지를 하나의 백엔드로 통합 관리
- **상태 동기화**: 페이지간 실시간 상태 전달
- **점진적 로딩**: 필요 시점에만 상세 정보 로드
- **메모리 기반**: 데모 안정성을 위한 경량 구조

## 🔧 확장 가능 아키텍처

### 운영 환경 전환시
- **Database**: 메모리 → Cloudflare D1 SQLite
- **Metrics**: Mock → Prometheus/Grafana 연동
- **Logging**: Mock → Loki/ELK Stack 연동  
- **Authentication**: 현재 없음 → JWT/OAuth 추가
- **Alerting**: 브라우저 팝업 → 실제 알림 채널 연동

### 보안 고려사항
- 현재는 데모용이므로 인증 없음
- 운영시 역할 기반 액세스 제어 필요
- 보수 액션의 권한 분리 및 승인 프로세스 필요

## 📝 배포 상태
- **Platform**: E2B Sandbox (개발 환경)
- **Status**: ✅ Active
- **Tech Stack**: Hono + TypeScript + TailwindCSS
- **Last Updated**: 2025-01-08

## 🚀 다음 단계 권장사항
1. **실제 메트릭 연동**: Prometheus/Grafana 통합
2. **D1 데이터베이스**: 영구 저장소 전환
3. **인증 시스템**: 사용자 역할별 권한 관리
4. **고급 시각화**: 차트.js를 통한 시계열 그래프
5. **알림 채널**: Slack/Teams 통합
6. **CI/CD**: GitHub Actions 자동 배포
7. **모니터링**: 실제 APM 도구 연동

---

**데모 특징**: 모든 기능이 1개 파일로 통합되어 있어 심사위원이 코드 구조를 쉽게 이해할 수 있습니다. 실제 운영 환경에서는 모듈 분리 및 확장이 필요합니다.